(this["webpackJsonpproducts-search"]=this["webpackJsonpproducts-search"]||[]).push([[0],{135:function(e,t,n){e.exports=n(280)},140:function(e,t,n){},141:function(e,t,n){},143:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),o=n.n(r),l=(n(140),n(13)),s=(n(141),n(22)),u=n.n(s),i=(n(143),n(283)),m=function(e){var t=e.filter,n=Object(a.useState)(""),r=Object(l.a)(n,2),o=r[0],s=r[1],u=Object(a.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1];return Object(a.useEffect)((function(){t({name:o,stocked:d})}),[d,o,t]),c.a.createElement("div",{className:"search-bar"},c.a.createElement(i.g,{type:"search",className:"search-input",leftIcon:"search",placeholder:"Search...",value:o,onChange:function(e){return s(e.target.value)}}),c.a.createElement(i.d,{checked:d,onChange:function(){return p(!d)}},"Only show products in stock"))},d=n(90),p=n.n(d),f=(n(260),n(261),function(e){return c.a.createElement("tr",null,c.a.createElement("th",{className:"category",colSpan:"100%"},e.name))}),b=(n(262),n(11)),E=function(e){var t=e.product,n=t.name,a=t.price,r=t.stocked,o=e.triggerDeleteAlert;return c.a.createElement("tr",{className:"product-row"},c.a.createElement("td",{className:r?"":"red-color"},n),c.a.createElement("td",null,a),c.a.createElement("td",{className:"edit-actions-col"},c.a.createElement(i.c,null,c.a.createElement(i.l,{content:"Delete",position:b.a.RIGHT},c.a.createElement(i.b,{icon:"trash",onClick:function(){return o(e.product)}})))))},h=(n(263),n(1)),O=function(e){var t=e.isOpen,n=e.hideDialog,r=e.confirmDialog,o=Object(a.useState)(""),s=Object(l.a)(o,2),u=s[0],m=s[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),f=p[0],b=p[1],E=Object(a.useState)("1"),O=Object(l.a)(E,2),g=O[0],v=O[1],j=Object(a.useState)(!0),k=Object(l.a)(j,2),w=k[0],C=k[1],y=function(){m(""),b(""),v("1"),C(!0),n()};return c.a.createElement(i.e,{icon:"plus",title:"New Product",isOpen:t,onClose:y},c.a.createElement("div",{className:h.a.DIALOG_BODY},c.a.createElement(i.f,{label:"Description",labelInfo:"(required)",labelFor:"text-input"},c.a.createElement(i.g,{className:"mb-10 w-220",placeholder:"Name",value:u,onChange:function(e){return m(e.target.value)}}),c.a.createElement(i.g,{className:"mb-10 w-220",placeholder:"Category",value:f,onChange:function(e){return b(e.target.value)}})),c.a.createElement(i.f,{label:"Price",labelInfo:"(required)",labelFor:"numeric-input"},c.a.createElement(i.h,{min:1,leftIcon:"dollar",value:g,onValueChange:function(e,t){return v(t)}})),c.a.createElement(i.j,{className:"w-220",large:!0,checked:w,label:"In stock",onChange:function(e){return C(e.target.checked)}})),c.a.createElement("div",{className:h.a.DIALOG_FOOTER},c.a.createElement("div",{className:h.a.DIALOG_FOOTER_ACTIONS},c.a.createElement(i.b,{intent:"warning",icon:"cross",onClick:y},"Close"),c.a.createElement(i.b,{icon:"confirm",intent:"success",onClick:function(){r({name:u,category:f,price:"$"+g,stocked:w}),y()},disabled:!(u&&f&&g>0)},"Confirm"))))},g=function(e){var t=e.products,n=e.addProduct,r=e.deleteProduct,o=Object(a.useState)(!1),s=Object(l.a)(o,2),u=s[0],m=s[1],d=Object(a.useState)(!1),h=Object(l.a)(d,2),g=h[0],v=h[1],j=Object(a.useState)(null),k=Object(l.a)(j,2),w=k[0],C=k[1];t=p()(t,(function(e){return e.category}));var y=Object(a.useCallback)((function(){m(!1)}),[]),N=Object(a.useCallback)((function(e){return n(e)}),[n]),S=Object(a.useCallback)((function(e){C(e),v(!0)}),[]);return c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-align-start"},"Name"),c.a.createElement("th",{className:"text-align-start"},"Price"),c.a.createElement("th",null))),Object.keys(t).map((function(e){return c.a.createElement("tbody",{key:e},c.a.createElement(f,{name:e,key:e}),t[e].map((function(e){return c.a.createElement(E,{product:e,triggerDeleteAlert:S,key:e._id})})))}))),c.a.createElement(i.l,{content:"Add a new Product",position:b.a.BOTTOM},c.a.createElement(i.b,{className:"mt-8",icon:"add",text:"New",intent:"primary",onClick:function(){m(!0)}})),c.a.createElement(O,{isOpen:u,hideDialog:y,confirmDialog:N}),c.a.createElement(i.a,{canEscapeKeyCancel:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete",icon:"trash",intent:"danger",isOpen:g,onCancel:function(){C(null),v(!1)},onConfirm:function(){v(!1),r(w),C(null)}},c.a.createElement("p",null,"Are you sure you want to delete this product?")))},v=i.k.create({position:b.a.TOP}),j={apiUrl:"https://products-search-api.herokuapp.com/api"},k=n(21),w=n.n(k),C=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),s=Object(l.a)(o,2),i=s[0],d=s[1];Object(a.useEffect)((function(){!function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(w.a.get("".concat(j.apiUrl,"/product")));case 3:e=t.sent,d(e.data),r(e.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),v.show({message:"Cannot get products",intent:"danger",icon:"error"});case 11:case"end":return t.stop()}}),null,null,[[0,8]])}()}),[]);var p=Object(a.useCallback)((function(e){r(i.filter((function(t){return t.name.toLowerCase().includes(e.name.toLowerCase())&&(!e.stocked||t.stocked)})))}),[i]),f=Object(a.useCallback)((function(e){!function(){var t;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(w.a.post("".concat(j.apiUrl,"/product"),e));case 3:t=n.sent,d(i.concat([t.data])),v.show({message:"Successfully added ".concat(e.name),intent:"success",icon:"saved"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),v.show({message:"Cannot add a new product",intent:"danger",icon:"error"});case 11:case"end":return n.stop()}}),null,null,[[0,8]])}()}),[i]),b=Object(a.useCallback)((function(e){u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(w.a.delete("".concat(j.apiUrl,"/product/").concat(e._id)));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),v.show({message:"Cannot delete a product",intent:"danger",icon:"error"}),t.abrupt("return");case 9:d(i.filter((function(t){return t._id!==e._id}))),v.show({message:"Successfully deleted ".concat(e.name),intent:"success",icon:"tick-circle"});case 11:case"end":return t.stop()}}),null,null,[[0,5]])}),[i]);return c.a.createElement("div",null,c.a.createElement(m,{filter:p}),c.a.createElement(g,{products:n,addProduct:f,deleteProduct:b}))};var y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return w.a.interceptors.request.use((function(e){return r(!0),e}),(function(e){return r(!0),Promise.reject(e)})),w.a.interceptors.response.use((function(e){return r(!1),e}),(function(e){return r(!1),Promise.reject(e)})),c.a.createElement("div",{className:"app"},c.a.createElement(C,null),c.a.createElement("div",null,n&&c.a.createElement(i.i,{className:"spinner",size:i.i.SIZE_LARGE})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[135,1,2]]]);
//# sourceMappingURL=main.bb0d893f.chunk.js.map